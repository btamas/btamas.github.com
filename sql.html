<!-- saved from url=(0066)http://www.cs.utexas.edu/~mitra/csFall2012/cs329/lectures/sql.html -->
<html><head><meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<title> Summary of SQL Commands </title>
<style type="text/css"></style></head>

<body>
<center>
<h3> SQL parancsok </h3>
</center>
<h3> Adatbázis </h3>
<p>
Az adatbázis tartalmazhat egy vagy több táblát. A táblát a nevével azonosítjuk.
Egy táblát sorok és oszlopok alkotnak. Az oszlopok tartalmazzák az attribútum nevét
és típusát. A sorok pedig a rekordokat vagy adatokat tartalmazzák az adott oszlopokban.
</p>

<h3> Alap SQL parancnsok</h3>
<p>
Minden rekordnak van egy egyedi azonosítója vagy másnéven elsődleges kulcsa.
Egy adatbázissal SQL parancsok segítségével tudunk kommunikálni. Ilyen parancsokon
keresztül tudunk létrehozni vagy törölni táblákat. Nézzük a parancsokat:
</p>
<ul>
<li> CREATE TABLE - létrehoz egy új táblát az adatbázisban
</li><li> ALTER TABLE - módosítja egy tábla adatait
</li><li> DROP TABLE - törli a táblát
</li></ul>

<p>
Szintén SQL parancsok segítségével tudunk módosítani, beszúrni vagy törölni rekordokat.
</p>
<ul>
<li> SELECT - adatok lekérdezése egy táblából
</li><li> UPDATE - adatok módosítása
</li><li> DELETE - adatok törlése
</li><li> INSERT INTO - új adat beszúrása
</li></ul>

<h3> SELECT </h3>
<p>
A SELECT parancs lekérdezi a feltételnek megfelelő adatokat, majd visszaküldi
a kliensünknek.<br><br>
SELECT <i>oszlop1</i> [, <i>oszlop2</i>, ...] <br>
FROM <i>táblanév</i> <br>
WHERE <i>feltétel</i> <br><br>
A feltételben a következő operátorokat használhatjuk:
</p>
<ul>
<li> = Egyenlő
</li><li> &gt; Nagyobb mint
</li><li> &lt; Kisebb mint
</li><li> &gt;= Nagyobb vagy egyenlő
</li><li> &lt;= Kisebb vagy egyenlő
</li><li> &lt;&gt; Nem egyenlő
</li><li> LIKE minta illesztés
</li></ul>
SELECT * FROM <i>táblanév</i> <br><br>
visszatér a táblában található összes adattal.
<p></p>

<p>
Sima idézőjelet ( '' ) használhatunk szöveges érték megadására, de a legtöbb
adatbázis elfogadja a dupla idézőjelet ( "" ) is.
</p>

<p>
LIKE segítségével tudunk mintát illeszteni. Helyettesítő karakterként a <i>%</i> használhatjuk
ami 0 vagy több bármilyen karaktert helyettesít.
</p><ul>
<li> 'A%' : megfelel minden szövegnek ami <i>A</i> betűvel kezdődik</li>
<li> '%a' : megfelel minden szövegnek ami <i>a</i> betűre végződik</li>
<li> '%a%' : megfelel minden szövegnek ami legalább egy <i>a</i> betűt tartalmaz</li>
</ul>
<p></p>

<h3> CREATE TABLE </h3>
<p>
A CREATE TABLE parancsot új tábla létrehozására használjuk. A formátuma a következő:<br><br>
CREATE TABLE <i>táblanév</i> <br>
(<i>oszlop1</i> <i>adat típus</i>, <br>
<i>oszlop2</i> <i>adat típus</i>, <br>
<i>oszlop3</i> <i>adat típus</i>); <br>
</p>
<ul>
<li> char(méret): Fix hosszúságú szöveg.
</li><li> varchar(méret): Változó hosszúságú szöveg, de maximum <i>méret</i> hosszú lehet.
</li><li> text: Korlátozás nélküli szöveges adat
</li><li> int(méret): Egész szám melynek hossza <i>méret</i>
</li><li> float(méret): Lebegőpontos szám melynek hossza <i>méret</i>
</li><li> date: Dátum
</li><li> boolean: Igaz/hamis
</li><li> enum(érték1,érték2,...): Csak a felsorolt értékeket veheti fel.
</li></ul>

<h3> INSERT INTO </h3>
<p>
Ha a táblát létrehoztuk akkor az INSERT INTO parancs segítségével szúrhatunk be
adatokat.
<br><br>
INSERT INTO <i>táblanév</i> <br>
(oszlop1, ... , oszlopn) <br>
VALUES (érték1, ... , értékn) <br>
</p>

<h3> UPDATE </h3>
<p>
Az UPDATE parancs segítségével tudunk egy már meglévő adatot módosítani<br><br>
UPDATE <i>táblanév</i> <br>
SET <i>oszlopX</i> = <i>értékX</i> [, <i>oszlopY</i> = <i>értékY</i>, ...] <br>
WHERE <i>feltétel</i> <br>
</p>

<h3> DELETE </h3>
<p>
A DELETE parancs szolgál az adatok törlésére.<br><br>
DELETE FROM <i>táblanév</i> <br>
WHERE <i>feltétel</i> <br><br>
Ha minden adatot ki szeretnénk törölni az adott táblából, akkor használjuk a következő parancsot:<br><br>
DELETE * FROM <i>táblanév</i>
</p>

<h3> DROP </h3>
<p>
Ahhoz hogy a táblát és a benne található összes adatot töröljuk, használjuk a következő parancsot:<br><br>
DROP TABLE <i>táblanév</i> <br>
</p>

<h3> ORDER BY </h3>
<p>
ORDER BY parancs segítségével tudjuk a lekérdezett adatokat rendezni növekvő sorrendbe (ASC) vagy
csökkenő sorrendbe (DESC).<br><br>
ORDER BY <i>oszlop_név</i> ASC
</p>

<h3> AND / OR </h3>
<p>
Az AND és OR parancsok segítségével tudunk kapcsolatot létrehozni két feltétel között.
Az AND akkor teljesül, ha minden feltétel teljesül, még az OR akkor ha bármelyik igaz.
</p>

<h3> IN </h3>
<p>
Az IN operátort akkor használjuk, ha pontosan tudjuk milyen értékeket szeretnénk lekérdezni
az adott feltételben.<br><br>
SELECT * FROM <i>táblanév</i>
WHERE <i>oszlopnév</i> IN (<i>érték1</i>, <i>érték2</i>, ...)
</p>

<h3> BETWEEN / AND </h3>
<p>
A BETWEEN ... AND operátor segítségével egy intervalumot tudunk lekérdezni.<br><br>
SELECT * FROM <i>táblanév</i>
WHERE <i>oszlopnév</i> 
BETWEEN <i>érték1</i> AND <i>érték2</i>
</p>

<h3> GROUP BY </h3>
<p>
A GROUP BY parancs segítségével tudjuk az adatokat csoportosítani.<br><br>
SELECT <i>függvény(oszlop1), oszlop2</i> FROM <i>table_name</i> GROUP BY <i>oszlop1</i> <br>
</p>
<p>
Ezt a parancsot olyan esetekben használjuk, amikor valamilyen adan szerint szeretnénk aggregálni, összefűzni.
Ilyen parancsok a következők:
<ul>
	<li>SUM: összegzés</li>
	<li>AVG: átlagolás</li>
	<li>COUNT: megszámolja a rekordok számát</li>
	<li>MAX: a legnagyobb értéket adja</li>
	<li>MIN: a legkisebb értéket adja
</ul>
</p>


<p>
<table border="1" width="50%">
<caption> Ügyfelek </caption>
<tbody><tr>
<th> Azonosító </th><th> Keresztnév </th><th> Vezetéknév </th><th> Cím </th>
<th> Telefon </th>
</tr>
<tr>
<td> 01 </td><td> Mickey </td><td> Mouse </td><td> 123 Gouda St. </td>
<td> 456-7890 </td>
</tr>
<tr>
<td> 02 </td><td> Donald </td><td> Duck </td><td> 325 Eider Ln. </td>
<td> 786-2365 </td>
</tr>
</tbody></table>
</p>

<p>
<table border="1" width="50%">
<caption> Termékek </caption>
<tbody><tr>
<th> Azonosító </th><th> Név </th><th> Gyár </th><th> Darab </th>
<th> Ár </th>
</tr>
<tr>
<td> 20-45 </td><td> Hammer </td><td> Stanley </td><td> 57 </td>
<td> 3.50 </td>
</tr>
<tr>
<td> 21-68 </td><td> ScrewDriver </td><td> DeVries </td><td> 84 </td>
<td> 2.75 </td>
</tr>
</tbody></table>
</p>

<p>
<table border="1" width="50%">
<caption> Rendelések </caption>
<tbody><tr>
<th> Azonosító </th><th> Termék_azonosító </th><th> Ügyfél_azonosító </th><th> Dátum </th>
<th> Darab </th>
</tr>
<tr>
<td> 2005-27 </td><td> 21-68 </td><td> 02 </td><td> 31 Oct 2005 </td><td>2</td>
</tr>
<tr>
<td> 2005-34 </td><td> 20-45 </td><td> 01 </td><td> 02 Nov 2005 </td><td>3</td>
</tr>
<tr>
<td> 2005-36 </td><td> 21-68 </td><td> 01 </td><td> 03 Nov 2005 </td><td>1</td>
</tr>
</tbody></table>
</p>


<p>
<strong>Kérdezzük le az összes ügyfelünk nevét:</strong><br><br>
SELECT Ügyfelek.Név<br>
FROM Ügyfelek<br><br>
</p>

<p>
<strong>Számoljuk meg hány ügyfelünk van</strong><br><br>
SELECT COUNT(Ügyfelek.Azonosító)<br>
FROM Ügyfelek<br>
</p>

<p>
<strong>Kérdezzük le a Dondald keresztnevű és Duck vezetéknevű ügyfelünk címét:</strong><br><br>
SELECT Ügyfelek.Cím<br>
FROM Ügyfelek<br>
WHERE Ügyfelek.Keresztnév = 'Donald' AND Ügyfelek.Vezetéknév = 'Duck'
</p>

<p>
<strong>Kérdezzük azokat az ügyfeleket akiknek a címe tartalmaz <i>2</i> számot:</strong><br><br>
SELECT Ügyfelek.Név<br>
FROM Ügyfelek<br>
WHERE Ügyfelek.Cím LIKE '%2%'
</p>

<p>
<strong>Kérdezzük le a $3 drágább termékeket:</strong><br><br>
SELECT Termékek.*<br>
FROM Termékek<br>
WHERE Termékek.Ár > 3
</p>

<p>
<strong>Szúrjunk be egy új ügyfelet (az azonosítót automatikusan kapja):</strong><br><br>
INSERT INTO Ügyfelek(Cím,Telefon,Vezetéknév,Keresztnév)<br>
VALUES('789 Golden Apple 12', '678-1231', 'Dog', 'Pluto')
</p>

<p>
<strong>Módosítsuk a Hammer árát $9-ra:</strong><br><br>
UPDATE Termékek<br>
SET Termékek.Ár = 5<br>
WHERE Termékek.Név = 'Hammer'
</p>

<p>
<strong>Kérdezzük le, hogy ki mit rendelt: </strong><br><br>
SELECT Ügyfelek.Vezetéknév, Ügyfelek.Keresztnév, Termék.Név <br>
FROM Ügyfelek, Termékek, Rendelések <br>
WHERE Ügyfelek.Azonosító = Rendelések.Ügyfél_azonosító AND Termék.Azonosító =
Rendelés.Termék_azonosító <br>
</p>

<p>
<strong>Töröljük le Donald rendeléseit:</strong><br><br>
DELETE FROM Rendelések<br>
WHERE Rendelés.Ügyfél_azonosító = '02'<br>
</p>

<p>
<strong>Kérdezzük le a legdrágább termék árát:</strong><br><br>
SELECT MAX(Termékek.Ár)<br>
FROM Termékek<br>
</p>

<p>
<strong>Kérdezzük le az eladott termékek számát:</strong><br><br>
SELECT SUM(Rendelések.Ár)<br>
FROM Rendelések<br>
</p>

<p>
<strong>Kérdezzük le a nevét és az abból befolyt bevételt:</strong><br><br>
SELECT Termékek.Név,SUM(Rendelések.Darab*Termékek.Ár)<br>
FROM Termékek,Rendelések<br>
WHERE Termékek.Azonosító = Rendelések.Termék_azonosító<br>
GROUP BY Termékek.Azonosító
</p>


</body></html>
